[command]
name = "neo:ci-dotnet"
description = "Automatically configure Azure Pipelines CI process for .NET projects (including template copying)"

[[parameters]]
name = "project_name"
description = "Project name or path, used for naming the generated YAML file and setting the solution path"
required = true

[implementation]
steps = [
    "1. Create Target Directory: Create `.azure-pipelines/` folder in the project root (if it doesn't exist).",
    "2. Copy Templates: Copy all contents from `skills/azure-pipelines/templates/` to `.azure-pipelines/`.",
    "3. Generate Pipeline File: Create `ci-[project_name].yml` in the project root.",
    "4. Write Content: The generated YAML must reference `.azure-pipelines/build/build-dotnet.yml` with correct parameters.",
    "5. Default Content Template:",
    "```yaml",
    "trigger:",
    "  - main",
    "",
    "pool:",
    "  vmImage: 'ubuntu-latest'",
    "",
    "steps:",
    "  - template: .azure-pipelines/build/build-dotnet.yml",
    "    parameters:",
    "      solution: '**/*.sln' # Or adjust based on project_name",
    "      dotnetSdkVersion: '8.x'",
    "      buildConfiguration: 'Release'",
    "```"
]

[constraints]
rules = [
    "Must use relative paths to reference templates, ensuring the Pipeline is executable in Azure DevOps.",
    "If a file with the same name exists, ask the user before overwriting.",
    "Ensure the copied directory structure matches `skills/azure-pipelines/templates/`."
]